const modal=document.getElementById("postModal"),modalImg=document.getElementById("modalImg"),modalCaption=document.getElementById("modalCaption"),modalLikes=document.getElementById("modalLikes"),modalAuthor=document.getElementById("modalAuthor"),btnDelete=document.getElementById("btnDelete"),closeBtn=document.querySelector(".modal-close");function openModal(e,t,o,n,a,l){modal.style.display="block",modalImg.src=t,modalCaption.textContent=o,modalLikes.textContent=n+" Likes",modalAuthor.textContent="Posted by: "+a,btnDelete.onclick=null,l?(btnDelete.classList.remove("hidden"),btnDelete.onclick=function(){confirm("Apakah Anda yakin ingin menghapus post ini secara permanen?")&&deletePost(e)}):btnDelete.classList.add("hidden")}function handlePostClick(e){openModal(e.dataset.id,e.dataset.img,e.dataset.caption,e.dataset.likes,e.dataset.username,"true"===e.dataset.isadmin)}async function deletePost(e){try{(await fetch("/api/post/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e})})).ok?(alert("Post berhasil dihapus!"),window.location.reload()):alert("Gagal menghapus post.")}catch(e){console.error(e),alert("Terjadi kesalahan server.")}}closeBtn.onclick=function(){modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none")};